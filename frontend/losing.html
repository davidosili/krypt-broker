<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Top 30 Losing Coins</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <body>
  <!-- Your dashboard content here -->

  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <a href="dashboard.html" class="active">
      <span class="icon">ğŸ </span>
      <span class="label">Home</span>
    </a>
    <a href="markets.html">
      <span class="icon">ğŸ“ˆ</span>
      <span class="label">Markets</span>
    </a>
    <a href="trade.html">
      <span class="icon">ğŸ’±</span>
      <span class="label">Trade</span>
    </a>
    <a href="assets.html">
      <span class="icon">ğŸ“‚</span>
      <span class="label">Assets</span>
    </a>
  </nav>

  <h2>ğŸ“‰ Top 30 Losing Coins (24h)</h2>
  <ul id="losingCoinsList"></ul>
  <a href="dashboard.html">â¬…ï¸ Back to Dashboard</a>

  <script>
    async function loadLosingCoins() {
      const res = await fetch('${API_URL}/api/coin/markets');
      const coins = await res.json();

      const falling = coins
        .filter(c => c.price_change_percentage_24h < 0)
        .sort((a, b) => a.price_change_percentage_24h - b.price_change_percentage_24h)
        .slice(0, 30);

      const ul = document.getElementById('losingCoinsList');
      falling.forEach(c => {
        const li = document.createElement('li');
        li.innerHTML = `<a href="coin.html?coinId=${c.id}">
        ğŸ“‰ ${c.name} (${c.symbol.toUpperCase()}) â†“ ${Math.abs(c.price_change_percentage_24h).toFixed(2)}%
        </a>`;
        ul.appendChild(li);
      });
    }

    loadLosingCoins();
  </script>
</body>
</html>
